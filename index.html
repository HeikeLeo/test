<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>CBA赛程（新）</title>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
		<style>
		    table {
		        width: 100%; /* 表格宽度为100% */
		        border-collapse: collapse; /* 合并边框 */
		    }
		    th, td {
		        border: 1px solid #ddd; /* 边框样式 */
		        padding: 8px 0px; /* 内边距 */
		        text-align: center; /* 左对齐 */
		        font-size: 90%; /* 字体大小 */
		    }
		    h1{
		        width: 100%; /* 表格宽度为100% */
		        text-align: center; /* 居中对齐 */
		        font-size: 130%; /* 字体大小 */
		    }
		    #header {
		        background-color: #f2f2f2; /* 表头背景色 */
		    }
		    .content:hover{
		        background-color: #fcf2e0; /* 鼠标悬停时的背景色 */
		    }
		    #cover{
		        width: 100vw; /* 宽度为100% */
		        height: 100vh; /* 高度为100% */
		        text-align: center; /* 居中对齐 */
		        position: fixed; /* 固定位置 */
		        top: 0; /* 距离顶部0 */
		        left: 0; /* 距离左侧0 */
		        background-color: darkgrey; /* 背景色 */
		        opacity: 0.95; /* 透明度 */
		        z-index: 10; /* 层级 */
		        display: none; /* 不显示 */
		        align-items: center; /* 垂直居中 */
		        justify-content: space-evenly; /* 水平居中 */
		    }
		    #cover div{
		        width: 80%; /* 宽度为80% */
		        height: 23%; /* 高度为23% */
		        background-color: gray; /* 背景色 */
		    }
		    #info{
		        width: 100%; /* 宽度为100% */
		        text-align: center; /* 居中对齐 */
		        font-size: 200%; /* 字体大小 */
		        position: relative; /* 相对定位 */
		        top: 20%; /* 距离顶部20% */
		    }
		</style>
	</head>
	<body>
	</body>
    <script>
        // CSV文件路径
        const csvFilePath = 'cba赛程（官网）.csv';

        // 使用fetch API获取CSV文件内容
        fetch(csvFilePath)
            .then(response => response.text())
            .then(csvText => {
                // 使用PapaParse解析CSV数据
                Papa.parse(csvText, {
                    header: true, // 如果CSV有标题行，设置为true
					skipEmptyLines: true, // 自动跳过空行
                    dynamicTyping: true,
                    complete: function(results) {
                        // results.data 包含解析后的数据
                        displayData(results.data);
                    }
                });
            })
            .catch(error => {
                console.error('Error fetching the CSV file:', error);
            });

        // 显示CSV数据
        function displayData(data) {
			const container = document.getElementsByTagName('body')[0]
            let html = '<table>';

            // 添加表头
            if (data.length > 0) {
                html += '<tr>';
                for (let key in data[0]) {
                    html += `<th>${key}</th>`;
                }
                html += '</tr>';
            }

            // 添加数据行
            data.forEach(row => {
                html += '<tr class="content">';
                for (let key in row) {
                    html += `<td>${row[key]}</td>`;
                }
                html += '</tr>';
            });

            html += '</table>';
            container.innerHTML = html;
        }
		
		setTimeout(date,10)
		
		function date(){
			var d=new Date() //获取当前时间
			var date=[d.getFullYear(),d.getMonth()+1,d.getDate()] //获取当前时间的年、月、日
			if (date[1]<10){
				date[1]='0'+date[1] //如果月小于10，在月前面加0
			}
			if (date[2]<10){
				date[2]='0'+date[2] //如果日小于10，在日前面加0
			}
			var content=document.getElementsByClassName('content') //获取所有的内容
			for(var i=0;i<content.length;i++){ //遍历所有的内容
				var content_date=content[i].innerHTML.split('<td>')[2].split('</td>')[0] //获取当前内容的日期
				var date_str=date[0]+'年'+date[1]+'月'+date[2]+'日' //获取当前时间的字符串
				if(content_date==date_str){ //如果当前内容的日期等于当前时间的字符串
					content[i].style.backgroundColor='pink' //将当前内容的背景色改为粉色
					content[i].style.fontWeight='bolder' //将当前内容的字体加粗
				}
			}
		}
	    /*var td=document.getElementsByTagName('td') //获取所有的td
	    for(var i=0;i<td.length;i++){ //遍历所有的td
	        td[i].onclick=function(){ //点击td时
	            show_info(this.innerHTML) //显示遮罩层
	        }
	    }
	    function show_info(text){ //显示遮罩层
	        var cover=document.getElementById('cover') //获取遮罩层
	        var info=document.getElementById('info') //获取信息
	        info.innerHTML=text //设置信息
	        cover.style.display='flex' //显示遮罩层
	    }
	    function close_info(){ //关闭遮罩层
	        var cover=document.getElementById('cover') //获取遮罩层
	        cover.style.display='none' //隐藏遮罩层
	    }*/
	</script>
</body>
</html>